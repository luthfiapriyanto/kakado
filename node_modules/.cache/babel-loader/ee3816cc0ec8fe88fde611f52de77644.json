{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");var _interopRequireWildcard=require(\"@babel/runtime/helpers/interopRequireWildcard\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _classCallCheck2=_interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));var _createClass2=_interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));var _possibleConstructorReturn2=_interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));var _getPrototypeOf2=_interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));var _inherits2=_interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));var _reactNativeWeb=require(\"react-native-web\");var _recipient_gift=_interopRequireDefault(require(\"./recipient_gift.jpg\"));var _brand_logo=_interopRequireDefault(require(\"./brand_logo.png\"));var _formik=require(\"formik\");var _react=_interopRequireWildcard(require(\"react\"));var _firebase=_interopRequireDefault(require(\"firebase\"));var _jsxFileName=\"/Users/luthfi/Gradire/src/Recipient.js\";(function(){var enterModule=typeof reactHotLoaderGlobal!=='undefined'?reactHotLoaderGlobal.enterModule:undefined;enterModule&&enterModule(module);})();var __signature__=typeof reactHotLoaderGlobal!=='undefined'?reactHotLoaderGlobal.default.signature:function(a){return a;};var Recipient=function(_Component){(0,_inherits2.default)(Recipient,_Component);function Recipient(props){var _this;(0,_classCallCheck2.default)(this,Recipient);_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(Recipient).call(this,props));_this._onButtonSubmitClick=function(value){var occasion=_this.state.dropdownValue;var senderName=value.senderName,senderPhone=value.senderPhone,senderEmail=value.senderEmail,budgetMin=value.budgetMin,budgetMax=value.budgetMax,message=value.message,recipientEmail=value.recipientEmail;_firebase.default.database().ref('WishesList/').push({senderName:senderName,senderPhone:senderPhone,senderEmail:senderEmail,occasion:occasion,budgetMin:budgetMin,budgetMax:budgetMax,message:message,recipientEmail:recipientEmail}).then(function(data){console.log('data ',data);_this.setState({messageId:data.key});_this._sendEmail(value,occasion,data.key);}).catch(function(error){console.log('error ',error);});};_this._sendEmail=function(value,occasion,id){var senderName=value.senderName,senderPhone=value.senderPhone,senderEmail=value.senderEmail,budgetMin=value.budgetMin,budgetMax=value.budgetMax,message=value.message,recipientEmail=value.recipientEmail;var user_id='user_n6HTP5Cb1hviBCnr7qva4';var recipientUrl=\"http://localhost:3000?params=\".concat(id);var templateId='template_QG18UX4g';window.emailjs.send('default_service',templateId,{recipient_email:recipientEmail,recipient_url:recipientUrl,sender_name:senderName,occasion:_this.state.occasion},user_id).then(function(res){console.log('XCX',res);}).catch(function(err){return console.error('Failed to send feedback. Error: ',err);});};_this.state={messageValue:'',messageId:props.location.search.split('?').pop()};var config={apiKey:\"AIzaSyAB8TiSYqmJGJaDJ2xHUjhW3j9UMdNwV-Q\",authDomain:\"gradire-83417.firebaseapp.com\",databaseURL:\"https://gradire-83417.firebaseio.com\",projectId:\"gradire-83417\",storageBucket:\"gradire-83417.appspot.com\",messagingSenderId:\"992342878515\",appId:\"1:992342878515:web:f04a70c41b72dc56f37646\",measurementId:\"G-FQPG4LXVYL\"};if(!_firebase.default.apps.length){_firebase.default.initializeApp(config);}return _this;}(0,_createClass2.default)(Recipient,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;console.log('XCXMount');console.log('XCX',this.state.messageId);_firebase.default.database().ref(\"MessageList/\".concat(this.state.messageId)).once('value',function(snapshot){_this2.setState({messageValue:snapshot.val().message});console.log('XCXfirebase',snapshot.val());});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){console.log('XCXupdate');}},{key:\"render\",value:function render(){var data=[{value:'Birthday'},{value:'Wedding'},{value:'Other'}];console.log('XCXmessage',this.state.messageValue);return _react.default.createElement(_reactNativeWeb.View,{style:styles.container,__source:{fileName:_jsxFileName,lineNumber:124},__self:this},_react.default.createElement(_reactNativeWeb.Image,{source:_brand_logo.default,style:styles.logo,__source:{fileName:_jsxFileName,lineNumber:125},__self:this}),_react.default.createElement(_reactNativeWeb.View,{style:styles.yellowRibbon,__source:{fileName:_jsxFileName,lineNumber:126},__self:this},_react.default.createElement(_reactNativeWeb.Text,{style:styles.titleBar,__source:{fileName:_jsxFileName,lineNumber:127},__self:this},\"Hassle-free gifting\")),_react.default.createElement(_reactNativeWeb.Text,{style:styles.title,__source:{fileName:_jsxFileName,lineNumber:129},__self:this},\"Hassle-free gifting\"),_react.default.createElement(_reactNativeWeb.View,{style:styles.formContainer,__source:{fileName:_jsxFileName,lineNumber:131},__self:this},_react.default.createElement(_reactNativeWeb.Image,{source:_recipient_gift.default,style:styles.imageAsset,__source:{fileName:_jsxFileName,lineNumber:132},__self:this}),_react.default.createElement(_reactNativeWeb.Text,{style:{fontSize:34},__source:{fileName:_jsxFileName,lineNumber:133},__self:this},\"Your Occasion is About to Coming\"),_react.default.createElement(_reactNativeWeb.View,{style:{alignItems:'flex-start',justifyContent:'flex-start',width:'100%'},__source:{fileName:_jsxFileName,lineNumber:134},__self:this},_react.default.createElement(_reactNativeWeb.Text,{style:{fontSize:20,marginTop:50},__source:{fileName:_jsxFileName,lineNumber:136},__self:this},this.state.messageValue)),_react.default.createElement(_formik.Formik,{initialValues:{recipientMessage:''},onSubmit:this._onButtonSubmitClick,__source:{fileName:_jsxFileName,lineNumber:138},__self:this},function(_ref){var handleChange=_ref.handleChange,handleSubmit=_ref.handleSubmit,values=_ref.values;return _react.default.createElement(_reactNativeWeb.View,{style:{flex:1,width:'100%'},__source:{fileName:_jsxFileName,lineNumber:143},__self:this},_react.default.createElement(_reactNativeWeb.View,{style:{flex:1,marginTop:40,width:'100%'},__source:{fileName:_jsxFileName,lineNumber:144},__self:this},_react.default.createElement(_reactNativeWeb.Text,{style:{fontSize:18},__source:{fileName:_jsxFileName,lineNumber:145},__self:this},\"Please explain what you really want!\"),_react.default.createElement(_reactNativeWeb.TextInput,{onChangeText:handleChange('message'),multiline:true,style:{width:'100%',paddingHorizontal:16,paddingVertical:16,height:200,borderColor:'#000',borderWidth:1,marginVertical:16,backgroundColor:'#fff'},placeholder:'I’m very happy now. Just cannot think clearly! But if you really want to know about my wish, it is a brand new Wallet.',__source:{fileName:_jsxFileName,lineNumber:146},__self:this})),_react.default.createElement(_reactNativeWeb.View,{style:{marginTop:40,width:250},__source:{fileName:_jsxFileName,lineNumber:161},__self:this},_react.default.createElement(_reactNativeWeb.Button,{color:'#000',onPress:handleSubmit,title:'SEND',__source:{fileName:_jsxFileName,lineNumber:162},__self:this})));})));}},{key:\"__reactstandin__regenerateByEval\",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code);}}]);return Recipient;}(_react.Component);var styles=_reactNativeWeb.StyleSheet.create({imageAsset:{marginVertical:20,paddingHorizontal:30,width:400,height:200},container:{flex:1,backgroundColor:'#FFFEFA',alignItems:'center',justifyContent:'center'},formContainer:{marginBottom:100,flex:1,alignItems:'center',justifyContent:'center',paddingHorizontal:100,paddingVertical:70},yellowRibbon:{paddingTop:50,color:'#FDF5D8',height:78,width:'100%'},logo:{marginVertical:20,paddingHorizontal:30,width:200,height:200},title:{fontWeight:'bold',fontSize:16},titleBar:{fontSize:38},button:{borderRadius:3,padding:20,marginVertical:10,marginTop:10,backgroundColor:'#1B95E0'},buttonText:{color:'#fff',fontWeight:'bold',fontSize:16}});var _default=Recipient;var _default2=_default;exports.default=_default2;;(function(){var reactHotLoader=typeof reactHotLoaderGlobal!=='undefined'?reactHotLoaderGlobal.default:undefined;if(!reactHotLoader){return;}reactHotLoader.register(Recipient,\"Recipient\",\"/Users/luthfi/Gradire/src/Recipient.js\");reactHotLoader.register(styles,\"styles\",\"/Users/luthfi/Gradire/src/Recipient.js\");reactHotLoader.register(_default,\"default\",\"/Users/luthfi/Gradire/src/Recipient.js\");})();;(function(){var leaveModule=typeof reactHotLoaderGlobal!=='undefined'?reactHotLoaderGlobal.leaveModule:undefined;leaveModule&&leaveModule(module);})();","map":{"version":3,"sources":["/Users/luthfi/Gradire/src/Recipient.js"],"names":["Recipient","props","_onButtonSubmitClick","value","occasion","state","dropdownValue","senderName","senderPhone","senderEmail","budgetMin","budgetMax","message","recipientEmail","firebase","database","ref","push","then","data","console","log","setState","messageId","key","_sendEmail","catch","error","id","user_id","recipientUrl","templateId","window","emailjs","send","recipient_email","recipient_url","sender_name","res","err","messageValue","location","search","split","pop","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","apps","length","initializeApp","once","snapshot","val","styles","container","logo","yellowRibbon","titleBar","title","formContainer","image","imageAsset","fontSize","alignItems","justifyContent","width","marginTop","recipientMessage","handleChange","handleSubmit","values","flex","paddingHorizontal","paddingVertical","height","borderColor","borderWidth","marginVertical","backgroundColor","Component","StyleSheet","create","marginBottom","paddingTop","color","fontWeight","button","borderRadius","padding","buttonText"],"mappings":"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","sourcesContent":["import { Image, Picker, StyleSheet, Text, TextInput, View } from 'react-native';\nimport image from './recipient_gift.jpg';\nimport logo from './brand_logo.png';\nimport { Formik } from 'formik';\nimport { Button } from 'react-native-web';\nimport React, { Component } from 'react';\nimport firebase from 'firebase';\n\n\nclass Recipient extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            messageValue: '',\n            messageId: props.location.search.split('?').pop(),\n        };\n\n        const config = {\n            apiKey: \"AIzaSyAB8TiSYqmJGJaDJ2xHUjhW3j9UMdNwV-Q\",\n            authDomain: \"gradire-83417.firebaseapp.com\",\n            databaseURL: \"https://gradire-83417.firebaseio.com\",\n            projectId: \"gradire-83417\",\n            storageBucket: \"gradire-83417.appspot.com\",\n            messagingSenderId: \"992342878515\",\n            appId: \"1:992342878515:web:f04a70c41b72dc56f37646\",\n            measurementId: \"G-FQPG4LXVYL\"\n        };\n        if (!firebase.apps.length) {\n            firebase.initializeApp(config);\n        }\n\n    }\n\n    componentDidMount() {\n        console.log('XCXMount')\n\n        console.log('XCX', this.state.messageId)\n        firebase.database().ref(`MessageList/${this.state.messageId}`).once('value',  (snapshot) => {\n            this.setState({ messageValue: snapshot.val().message });\n\n            console.log('XCXfirebase', snapshot.val())\n        });\n    }\n\n    componentDidUpdate() {\n        console.log('XCXupdate')\n    }\n\n    _onButtonSubmitClick = (value) => {\n        const occasion  = this.state.dropdownValue;\n        const {\n            senderName,\n            senderPhone,\n            senderEmail,\n            budgetMin,\n            budgetMax,\n            message,\n            recipientEmail\n        } = value;\n\n        firebase.database().ref('WishesList/').push({\n            senderName,\n            senderPhone,\n            senderEmail,\n            occasion,\n            budgetMin,\n            budgetMax,\n            message,\n            recipientEmail,\n        }).then((data)=>{\n            console.log('data ' , data)\n            this.setState({ messageId: data.key });\n            this._sendEmail(value, occasion, data.key);\n\n        }).catch((error)=>{\n            console.log('error ' , error)\n        })\n\n    };\n\n    _sendEmail = (value, occasion, id) => {\n        const {\n            senderName,\n            senderPhone,\n            senderEmail,\n            budgetMin,\n            budgetMax,\n            message,\n            recipientEmail\n        } = value;\n        const user_id = 'user_n6HTP5Cb1hviBCnr7qva4';\n        const recipientUrl = `http://localhost:3000?params=${id}`;\n\n        const templateId = 'template_QG18UX4g';\n        window.emailjs\n            .send('default_service', templateId, {\n                    recipient_email: recipientEmail,\n                    recipient_url: recipientUrl,\n                    sender_name: senderName,\n                    occasion: this.state.occasion\n                },\n                user_id\n            )\n            .then(res => {\n                console.log('XCX', res)\n            })\n            // Handle errors here however you like\n            .catch(err => console.error('Failed to send feedback. Error: ', err));\n    }\n\n\n    render() {\n        const data = [{\n            value: 'Birthday',\n        }, {\n            value: 'Wedding',\n        }, {\n            value: 'Other',\n        }];\n        console.log('XCXmessage', this.state.messageValue)\n\n        return (\n            <View style={styles.container}>\n                <Image source={logo} style={styles.logo}/>\n                <View style={styles.yellowRibbon}>\n                    <Text style={styles.titleBar}>Hassle-free gifting</Text>\n                </View>\n                <Text style={styles.title}>Hassle-free gifting</Text>\n\n                <View style={styles.formContainer}>\n                    <Image source={image} style={styles.imageAsset}/>\n                    <Text style={{ fontSize: 34 }}>Your Occasion is About to Coming</Text>\n                    <View style={{ alignItems: 'flex-start',\n                        justifyContent: 'flex-start', width: '100%' }}>\n                        <Text style={{ fontSize: 20, marginTop: 50 }}>{this.state.messageValue}</Text>\n                    </View>\n                    <Formik initialValues={{\n                        recipientMessage: ''\n                    }}\n                            onSubmit={this._onButtonSubmitClick}>\n                        {({ handleChange, handleSubmit, values }) => (\n                            <View style={{ flex: 1, width: '100%' }}>\n                                    <View style={{ flex: 1, marginTop: 40, width: '100%' }}>\n                                        <Text style={{ fontSize: 18 }}>Please explain what you really want!</Text>\n                                        <TextInput\n                                            onChangeText={handleChange('message')}\n                                            multiline={true}\n                                            style={{\n                                                width: '100%',\n                                                paddingHorizontal: 16,\n                                                paddingVertical: 16,\n                                                height: 200,\n                                                borderColor: '#000',\n                                                borderWidth: 1,\n                                                marginVertical: 16,\n                                                backgroundColor: '#fff'\n                                            }}\n                                            placeholder={'I’m very happy now. Just cannot think clearly! But if you really want to know about my wish, it is a brand new Wallet.'}/>\n                                    </View>\n                                    <View style={{ marginTop: 40, width: 250 }}>\n                                        <Button color={'#000'}  onPress={handleSubmit} title={'SEND'}/>\n                                    </View>\n                            </View>\n                        )}\n                    </Formik>\n                </View>\n            </View>\n        );\n    }\n}\n\nconst styles = StyleSheet.create({\n\n    imageAsset: {\n        marginVertical: 20,\n        paddingHorizontal: 30,\n        width: 400,\n        height: 200,\n    },\n    container: {\n        flex: 1,\n        backgroundColor: '#FFFEFA',\n        alignItems: 'center',\n        justifyContent: 'center',\n    },\n    formContainer: {\n        marginBottom: 100,\n        flex: 1,\n        alignItems: 'center',\n        justifyContent: 'center',\n        paddingHorizontal: 100,\n        paddingVertical: 70\n    },\n    yellowRibbon: {\n        paddingTop: 50,\n        color: '#FDF5D8',\n        height: 78,\n        width: '100%'\n    },\n    logo: {\n        marginVertical: 20,\n        paddingHorizontal: 30,\n        width: 200,\n        height: 200,\n    },\n    title: {\n        fontWeight: 'bold',\n        fontSize: 16,\n    },\n    titleBar: {\n        fontSize: 38\n    },\n    button: {\n        borderRadius: 3,\n        padding: 20,\n        marginVertical: 10,\n        marginTop: 10,\n        backgroundColor: '#1B95E0',\n    },\n    buttonText: {\n        color: '#fff',\n        fontWeight: 'bold',\n        fontSize: 16,\n    },\n});\n\nexport default Recipient;\n"]},"metadata":{},"sourceType":"script"}